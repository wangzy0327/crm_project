<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <link href="css/bootstrap.min.css?v=3.3.6" rel="stylesheet">
    <link href="css/font-awesome.css?v=4.4.0" rel="stylesheet">
    <link href="css/animate.css" rel="stylesheet">
    <link href="css/style.css?v=4.1.0" rel="stylesheet">
    <link href="css/bootstrap-fileinput/fileinput.min.css" rel="stylesheet">
</head>
<body>
    <input id="attach" name="input-b5[]" type="file" multiple>

    <script src="js/jquery.min.js"></script>
    <script src="js/bootstrap.min.js"></script>
    <script src="js/bootstrap-fileinput/fileinput.min.js"></script>
    <script src="js/bootstrap-fileinput/fileinput_locale_zh.js"></script>
    <script>
        function initFileInput(ctrlName,uploadUrl) {
            var control = $('#' + ctrlName);
            control.fileinput({
                language: 'zh', //设置语言
                uploadUrl: uploadUrl,  //上传地址
                showUpload: false, //是否显示上传按钮
                showRemove:true,
                dropZoneEnabled: false,
                showCaption: true,//是否显示标题
                allowedPreviewTypes: ['image'],
                allowedFileTypes: ['image'],
                allowedFileExtensions:  ['jpg', 'png', 'jpeg'],
                maxFileSize : 2000,
                maxFileCount: 1,
                enctype: 'multipart/form-data'
                //initialPreview: [
                //预览图片的设置
                //      "<img src='http://127.0.0.1:8080/NewsManageSys/plugin/umeditor1_2_2/jsp/upload/20161030/55061                       477813913474.jpg' class='file-preview-image' alt='肖像图片' title='肖像图片'>",
                //],

            }).on("filebatchselected", function(event, files) {
                $(this).fileinput("upload");
            }).on("fileuploaded", function(event, data) {
                console.log("data:"+data);
                $("#path").attr("value",data.response);
            }).on('fileerror', function(event, data, msg) {
                console.log("data"+data);
                console.log("msg"+msg);
            });;
        }

        $(function () {
            var path="/upload/save";
            initFileInput("attach",path);
        })
    </script>

</body>
</html>